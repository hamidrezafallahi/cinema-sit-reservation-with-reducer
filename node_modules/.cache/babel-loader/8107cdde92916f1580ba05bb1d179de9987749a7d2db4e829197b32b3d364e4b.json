{"ast":null,"code":"var _jsxFileName = \"E:\\\\fallahi\\\\front end practice\\\\REACT2\\\\peactice-num-3\\\\src\\\\components\\\\Sections.js\",\n  _s = $RefreshSig$();\nimport React, { useReducer, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Section from \"./Section\";\nimport style from \"../styles/style.module.css\";\n\n//----------------------------------------------------------------\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initState = {\n  chairs: [],\n  errorMessage: \"\",\n  count: 0,\n  sum: 0\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"success\":\n      return {\n        ...state,\n        chairs: action.chairs\n      };\n    case \"failed\":\n      return {\n        ...state,\n        errorMessage: action.error\n      };\n    case \"change-state\":\n      return {\n        ...state,\n        chairs: action.chairs\n      };\n    case \"calc\":\n      return {\n        ...state,\n        count: action.count,\n        sum: action.sum\n      };\n    default:\n      return state;\n  }\n};\nconst Sections = () => {\n  _s();\n  const [data, dispatch] = useReducer(reducer, initState);\n  useEffect(() => {\n    axios.get(\"chairs.json\").then(response => {\n      dispatch({\n        type: \"success\",\n        chairs: response.data\n      });\n    }).catch(error => dispatch({\n      type: \"failed\",\n      error: error.message\n    }));\n  }, []);\n\n  //----------------------------------------------------------------\n  const clickHandler = number => {\n    switch (data.chairs[number - 1].state) {\n      case \"unselected\":\n        data.chairs[number - 1].state = \"selected\";\n        break;\n      case \"selected\":\n        data.chairs[number - 1].state = \"pending\";\n        break;\n      case \"pending\":\n        data.chairs[number - 1].state = \"reserved\";\n        break;\n      case \"reserved\":\n        alert(\"قبلا رزرو شده\");\n        break;\n    }\n    dispatch({\n      type: \"change-state\",\n      chairs: data.chairs\n    });\n    if (data.chairs[number - 1].state === \"reserved\") {\n      const reservedChairs = data.chairs.filter(chair => chair.state === \"reserved\");\n      const count = reservedChairs.length;\n      let sum = 0;\n      for (let i = 0; i < count; i++) {\n        sum += reservedChairs[i].price;\n      }\n      dispatch({\n        type: \"calc\",\n        count: count,\n        sum: sum\n      });\n    }\n  };\n  //----------------------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: style[\"stage\"],\n      children: \"Stage\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style[\"calc-box\"],\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Count : \", data.count]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Sum : \", data.sum]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style[\"section-container\"],\n      children: [/*#__PURE__*/_jsxDEV(Section, {\n        data: data.chairs.filter(chair => chair.section === \"B\"),\n        clickHandler: clickHandler,\n        sectionStyle: style[\"section-b\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        data: data.chairs.filter(chair => chair.section === \"A\"),\n        clickHandler: clickHandler,\n        sectionStyle: style[\"section-a\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        data: data.chairs.filter(chair => chair.section === \"C\"),\n        clickHandler: clickHandler,\n        sectionStyle: style[\"section-c\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Section, {\n        data: data.chairs.filter(chair => chair.section === \"D\"),\n        clickHandler: clickHandler,\n        sectionStyle: style[\"section-d\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(Sections, \"1EHhJDvT++RhgfWvEfVFdDw6fqM=\");\n_c = Sections;\nexport default Sections;\nvar _c;\n$RefreshReg$(_c, \"Sections\");","map":{"version":3,"names":["React","useReducer","useEffect","axios","Section","style","jsxDEV","_jsxDEV","initState","chairs","errorMessage","count","sum","reducer","state","action","type","error","Sections","_s","data","dispatch","get","then","response","catch","message","clickHandler","number","alert","reservedChairs","filter","chair","length","i","price","children","className","fileName","_jsxFileName","lineNumber","columnNumber","section","sectionStyle","_c","$RefreshReg$"],"sources":["E:/fallahi/front end practice/REACT2/peactice-num-3/src/components/Sections.js"],"sourcesContent":["import React, { useReducer, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Section from \"./Section\";\r\nimport style from \"../styles/style.module.css\";\r\n\r\n//----------------------------------------------------------------\r\nconst initState = {\r\n  chairs: [],\r\n  errorMessage: \"\",\r\n  count: 0,\r\n  sum: 0,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"success\":\r\n      return {\r\n        ...state,\r\n        chairs: action.chairs,\r\n      };\r\n    case \"failed\":\r\n      return { ...state, errorMessage: action.error };\r\n    case \"change-state\":\r\n      return { ...state, chairs: action.chairs };\r\n    case \"calc\":\r\n      return { ...state, count: action.count, sum: action.sum };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n\r\n\r\nconst Sections = () => {\r\n  \r\n  const [data, dispatch] = useReducer(reducer, initState);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"chairs.json\")\r\n      .then((response) => {\r\n        dispatch({\r\n          type: \"success\",\r\n          chairs: response.data,\r\n        });\r\n      })\r\n      .catch((error) =>\r\n        dispatch({ \r\n          type: \"failed\", \r\n          error: error.message \r\n        }));\r\n  }, []);\r\n\r\n\r\n//----------------------------------------------------------------\r\n  const clickHandler = (number) => {\r\n\r\n    switch (data.chairs[number - 1].state) {\r\n      case \"unselected\":\r\n        data.chairs[number - 1].state = \"selected\";\r\n        break;\r\n      case \"selected\":\r\n        data.chairs[number - 1].state = \"pending\";\r\n        break;\r\n      case \"pending\":\r\n        data.chairs[number - 1].state = \"reserved\";\r\n        break;\r\n      case \"reserved\":\r\n        alert(\"قبلا رزرو شده\");\r\n        break;\r\n    }\r\n\r\n\r\n    dispatch({ \r\n      type: \"change-state\",\r\n      chairs: data.chairs \r\n    });\r\n\r\n\r\n\r\n\r\n    if (data.chairs[number - 1].state === \"reserved\") {\r\n      const reservedChairs = data.chairs.filter(\r\n        (chair) => chair.state === \"reserved\"\r\n      );\r\n      const count = reservedChairs.length;\r\n      let sum = 0;\r\n      for (let i = 0; i < count; i++) {\r\n        sum += reservedChairs[i].price;\r\n      }\r\n\r\n      dispatch({\r\n        type: \"calc\",\r\n        count: count,\r\n        sum: sum,\r\n      });\r\n    }\r\n  };\r\n//----------------------------------------------------------------\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className={style[\"stage\"]}>Stage</div>\r\n      <div className={style[\"calc-box\"]}>\r\n        <div>Count : {data.count}</div>\r\n        <div>Sum : {data.sum}</div>\r\n      </div>\r\n\r\n\r\n      <div className={style[\"section-container\"]}>\r\n\r\n        <Section data={data.chairs.filter((chair) => chair.section === \"B\")} \r\n                 clickHandler={clickHandler} \r\n                 sectionStyle={style[\"section-b\"]} />\r\n\r\n\r\n        <Section \r\n                 data={data.chairs.filter((chair) => chair.section === \"A\")} \r\n                 clickHandler={clickHandler} \r\n                 sectionStyle={style[\"section-a\"]} />\r\n\r\n\r\n\r\n        <Section \r\n                 data={data.chairs.filter((chair) => chair.section === \"C\")} \r\n                 clickHandler={clickHandler} \r\n                 sectionStyle={style[\"section-c\"]} />\r\n      </div>\r\n      <div>\r\n        <Section \r\n                 data={data.chairs.filter((chair) => chair.section === \"D\")} \r\n                 clickHandler={clickHandler} \r\n                 sectionStyle={style[\"section-d\"]} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sections;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}